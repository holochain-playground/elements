<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        background: #fafafa;
        font-family: Arial, Helvetica, sans-serif;
      }
    </style>
  </head>
  <body>
    <holochain-playground-container id="container">
      <run-steps id="steps" style="height: 300px; width: 100%;"></run-steps>
      <zome-fns-results style="height: 350px; width: 100%;"></zome-fns-results>
      <dht-cells
        id="cells"
        style="height: 600px; width: 800px;"
        step-by-step
      ></dht-cells>
      <call-zome-fns
        hide-agent-pub-key
        style="height: 350px; width: 100%;"
        id="call-zome"
      ></call-zome-fns>
      <entry-graph style="height: 600px; width: 100%;"></entry-graph>
      <entry-contents style="height: 350px; width: 100%;"></entry-contents>
    </holochain-playground-container>

    <script type="module">
      import { html, render } from 'lit-html';
      import {
        HolochainPlaygroundContainer,
        CallZomeFns,
        SourceChain,
        SelectActiveDna,
        DhtCells,
        ZomeFnsResults,
        EntryGraph,
        EntryContents,
        RunSteps,
      } from '../dist';
      import {
        GetStrategy,
        WorkflowType,
        NetworkRequestType,
        demoDnaTemplate,
      } from '@holochain-playground/core';

      customElements.define(
        'holochain-playground-container',
        HolochainPlaygroundContainer
      );
      customElements.define('run-steps', RunSteps);
      customElements.define('dht-cells', DhtCells);
      customElements.define('select-active-dna', SelectActiveDna);
      customElements.define('call-zome-fns', CallZomeFns);
      customElements.define('source-chain', SourceChain);
      customElements.define('entry-graph', EntryGraph);
      customElements.define('zome-fns-results', ZomeFnsResults);
      customElements.define('entry-contents', EntryContents);

      const container = document.getElementById('container');
      container.numberOfSimulatedConductors = 2;

      container.addEventListener('ready', (e) => {
        const conductor = e.detail.conductors[0];

        const cellId = conductor.getAllCells()[0].cellId;

        container.activeDna = cellId[0];
      });

      const steps = [
        {
          title: 'ahoy',
          run: async (context) => {
            const conductor = context.conductors[0];
            const cellId = conductor.getAllCells()[0].cellId;
            await conductor.callZomeFn({
              cellId: cellId,
              zome: 'demo_entries',
              payload: { content: 'asdf' },
              fnName: 'create_entry',
              cap: null,
            });
          },
        },
        {
          title: 'ahoy2',
          run: async (context) => {
            const conductor = context.conductors[0];
            const cellId = conductor.getAllCells()[0].cellId;
            await conductor.callZomeFn({
              cellId: cellId,
              zome: 'demo_entries',
              payload: { content: 'asdf' },
              fnName: 'create_entry',
              cap: null,
            });
          },
        },
        {
          title: 'ahoy3',
          run: async (context) => {
            const conductor = context.conductors[0];
            const cellId = conductor.getAllCells()[0].cellId;
            await conductor.callZomeFn({
              cellId: cellId,
              zome: 'demo_entries',
              payload: { content: 'asdf' },
              fnName: 'create_entry',
              cap: null,
            });
          },
        },
      ];

      document.getElementById('steps').steps = steps;
    </script>
  </body>
</html>
