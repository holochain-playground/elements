<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        background: #fafafa;
        font-family: Arial, Helvetica, sans-serif;
      }
    </style>
  </head>
  <body>
    <holochain-playground-container id="container">
      <entry-graph style="height: 300px; width: 100%"></entry-graph>
<!--        <dht-cells style="height: 200px; width: 100%"></dht-cells>
 -->       <call-zome-fns
        hide-results
        hide-zome-selector
        style="height: 350px; width: 100%"
        id="call-zome"
      ></call-zome-fns>
    </holochain-playground-container>

    <script type="module">
      import { html, render } from 'lit-html';
      import { CallZomeFns } from '../dist/elements/call-zome-fns';
      import { DhtCells } from '../dist/elements/dht-cells';
      import { EntryGraph } from '../dist/elements/entry-graph';
      import { HolochainPlaygroundContainer } from '@holochain-playground/container';

      const dna = {
        zomes: [
          {
            name: 'sample',
            entry_defs: [
              {
                id: 'path',
                visibility: 'Public',
              },
            ],
            zome_functions: {
              create_path: {
                call: (hdk) => ({ path }) => {
                  return hdk.path.ensure(path, hdk);
                },
                arguments: [{ name: 'path', type: 'String' }],
              },
            },
          },
        ],
      };

      customElements.define(
        'holochain-playground-container',
        HolochainPlaygroundContainer
      );
      customElements.define('entry-graph', EntryGraph);
      customElements.define('dht-cells', DhtCells);
      customElements.define('call-zome-fns', CallZomeFns);

      const container = document.getElementById('container');
      container.numberOfSimulatedConductors = 2;
      container.simulatedDnaTemplate = dna;

      container.addEventListener('ready', (e) => {
        const conductor = e.detail.conductors[0];

        const cellId = conductor.getAllCells()[0].cellId;

        container.activeDna = cellId[0];
        container.activeAgentPubKey = cellId[1];
        conductor.callZomeFn({
          cellId,
          zome: "sample",
          fnName: "create_path",
          payload: { path: "a.sample.path2" },
          cap: null,
        });

      });
    </script>
  </body>
</html>
