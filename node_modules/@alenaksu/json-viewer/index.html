<html>
    <head>
        <!-- <link rel="stylesheet" href="./src/styles.css"> -->
        <style>
            html,
            body {
                margin: 0;
                height: 100%;
                width: 100%;
                background-color: rgb(42, 47, 58);
            }

            body {
                display: flex;
                flex-direction: column;
            }

            .header {
                color: white;
                font-family: Arial, Helvetica, sans-serif;
                text-align: center;
                margin: 20px 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .header > * {
                margin: 0 20px;
            }

            .container {
                display: flex;
                flex-direction: row;
                height: 100%;
                width: 100%;
            }

            .panel {
                max-height: 100%;
                overflow-y: auto;
                padding: 20px;
                flex-grow: 1;
            }

            .panel:not(:last-child) {
                border-right: 1px solid #666;
            }

            .CodeMirror,
            textarea {
                display: block;
                width: 100%;
                height: 100% !important;
            }
        </style>
        <link rel="stylesheet" href="https://unpkg.com/codemirror@5.50.0/lib/codemirror.css" />
        <style>
            .cm-s-jsv.CodeMirror {
                background: #2a2f3a;
                color: #f8f8f2;
                font-size: 1rem;
            }
            .cm-s-jsv div.CodeMirror-selected {
                background: #49483e;
            }
            .cm-s-jsv .CodeMirror-line::selection,
            .cm-s-jsv .CodeMirror-line > span::selection,
            .cm-s-jsv .CodeMirror-line > span > span::selection {
                background: rgba(73, 72, 62, 0.99);
            }
            .cm-s-jsv .CodeMirror-line::-moz-selection,
            .cm-s-jsv .CodeMirror-line > span::-moz-selection,
            .cm-s-jsv .CodeMirror-line > span > span::-moz-selection {
                background: rgba(73, 72, 62, 0.99);
            }
            .cm-s-jsv .CodeMirror-gutters {
                background: #2a2f3a;
                border-right: 0px;
            }
            .cm-s-jsv .CodeMirror-guttermarker {
                color: white;
            }
            .cm-s-jsv .CodeMirror-guttermarker-subtle {
                color: #d0d0d0;
            }
            .cm-s-jsv .CodeMirror-linenumber {
                color: #d0d0d0;
            }
            .cm-s-jsv .CodeMirror-cursor {
                border-left: 1px solid #f8f8f0;
            }

            .cm-s-jsv span.cm-comment {
                color: #75715e;
            }
            .cm-s-jsv span.cm-atom {
                color: #4ba7ef;
            }
            .cm-s-jsv span.cm-number {
                color: #d19a66;
            }

            .cm-s-jsv span.cm-comment.cm-attribute {
                color: #97b757;
            }
            .cm-s-jsv span.cm-comment.cm-def {
                color: #bc9262;
            }
            .cm-s-jsv span.cm-comment.cm-tag {
                color: #bc6283;
            }
            .cm-s-jsv span.cm-comment.cm-type {
                color: #5998a6;
            }

            .cm-s-jsv span.cm-keyword {
                color: #f92672;
            }
            .cm-s-jsv span.cm-builtin {
                color: #66d9ef;
            }
            .cm-s-jsv span.cm-string {
                color: #a3eea0;
            }

            .cm-s-jsv span.cm-variable {
                color: #f8f8f2;
            }
            .cm-s-jsv span.cm-variable-2 {
                color: #9effff;
            }
            .cm-s-jsv span.cm-variable-3,
            .cm-s-jsv span.cm-type {
                color: #66d9ef;
            }
            .cm-s-jsv span.cm-def {
                color: #fd971f;
            }
            .cm-s-jsv span.cm-bracket {
                color: #f8f8f2;
            }
            .cm-s-jsv span.cm-tag {
                color: #f92672;
            }
            .cm-s-jsv span.cm-header {
                color: #ae81ff;
            }
            .cm-s-jsv span.cm-link {
                color: #ae81ff;
            }
            .cm-s-jsv span.cm-error {
                background: #f92672;
                color: #f8f8f0;
            }

            .cm-s-jsv span.cm-property,
            .cm-s-jsv span.cm-attribute {
                color: #6fb3d2;
            }

            .cm-s-jsv .CodeMirror-activeline-background {
                background: #373831;
            }
            .cm-s-jsv .CodeMirror-matchingbracket {
                text-decoration: underline;
                color: white !important;
            }
        </style>
    </head>

    <body>
        <div class="header">
            <h1>
                @alenaksu/json-viewer
            </h1>
            <a
                class="github-button"
                href="https://github.com/alenaksu/json-viewver/fork"
                data-size="large"
                data-show-count="true"
                aria-label="Fork alenaksu/json-viewver on GitHub"
                >Fork</a
            >
        </div>
        <div class="container">
            <div class="panel">
                <textarea id="json">
[
    {
        "_id": "5dfccc2c6306753f2876a49e",
        "index": 0,
        "guid": "f1567a17-b190-4347-8eb1-647a39370348",
        "isActive": true,
        "balance": "$1,924.63",
        "picture": "http://placehold.it/32x32",
        "age": 33,
        "eyeColor": "blue",
        "name": {
        "first": "Robles",
        "last": "Huffman"
        },
        "company": "NETERIA",
        "email": "robles.huffman@neteria.info",
        "phone": "+1 (994) 596-3353",
        "address": "925 Buffalo Avenue, Richmond, Vermont, 6876",
        "registered": "Monday, August 3, 2015 11:27 AM",
        "latitude": "-79.213713",
        "longitude": "89.9827"
    },
    {
        "_id": "5dfccc2c3828bfab36d46bb3",
        "index": 1,
        "guid": "391cafd5-d161-4810-9a0d-442118cc64a5",
        "isActive": false,
        "balance": "$1,764.62",
        "picture": "http://placehold.it/32x32",
        "age": 23,
        "eyeColor": "blue",
        "name": {
        "first": "Eve",
        "last": "Lowe"
        },
        "company": "PURIA",
        "email": "eve.lowe@puria.us",
        "phone": "+1 (849) 411-3656",
        "address": "677 Dinsmore Place, Delshire, Minnesota, 3024",
        "registered": "Wednesday, March 1, 2017 5:40 PM",
        "latitude": "-66.435424",
        "longitude": "134.393326"
    }
]
                </textarea>
            </div>
            <div class="panel">
                <json-viewer> </json-viewer>
            </div>
        </div>
        <script src="https://unpkg.com/codemirror@5.50.0/lib/codemirror.js"></script>
        <script src="https://unpkg.com/codemirror@5.50.0/mode/javascript/javascript.js"></script>
        <!-- Place this tag in your head or just before your close body tag. -->
        <script async defer src="https://buttons.github.io/buttons.js"></script>
        <script src="./src/index.js"></script>
        <script>
            (() => {
                const json = document.querySelector('#json');
                const viewer = document.querySelector('json-viewer');

                const debounce = (fn, timeout = 500) => {
                    let timeoutId;
                    return (...args) => {
                        clearTimeout(timeoutId);
                        timeoutId = setTimeout(() => fn(...args), timeout);
                    };
                };

                const loadJson = debounce(data => {
                    try {
                        viewer.data = JSON.parse(data);
                    } catch (ex) {
                        viewer.data = ex.message;
                    }
                });

                const editor = CodeMirror.fromTextArea(json, {
                    mode: { name: 'javascript', json: true },
                    // matchBrackets: true,
                    // smartIndent: true,
                    // indentUnit: 4,
                    // lineWrapping: true,
                    lineNumbers: true,
                    theme: 'jsv',
                    styleActiveLine: true,
                    // foldGutter: true,
                    // gutters: ['CodeMirror-lint-markers', 'CodeMirror-linenumbers', 'CodeMirror-foldgutter'],
                    lint: {
                        esversion: 6
                    }
                });

                editor.on('change', () => loadJson(editor.getValue()));
                loadJson(json.value);
            })();
        </script>
    </body>
</html>
